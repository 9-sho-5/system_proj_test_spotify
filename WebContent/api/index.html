<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Spotify</title>
	<link rel="stylesheet" type="text/css" href="./assets/css/index.css"/>
	<link rel="stylesheet" type="text/css" href="./assets/css/reset.css"/>
	<script type="text/javascript" src="./assets/javascript/index.js"></script>
</head>
<style>
</style>
<body>
	<div class="login_view">
		<img src="https://storage.googleapis.com/spotifynewsroom-jp.appspot.com/1/2020/12/Spotify_Logo_CMYK_Black.png" alt="spotify" />
		<script>
			const href = window.location.href;
			const token = href.split("api/");
			let loginElement = document.querySelector(".login_view");
			if(token[1] != "index.html") {
				let btn_element = document.createElement("p");
				btn_element.textContent = "ログインしました";
				let serch_form = document.createElement("form");
				serch_form.setAttribute("action", "/isp2/api/search");
				serch_form.setAttribute("method", "get");
				let input_element = document.createElement("input");
				let submit_element = document.createElement("input");
				let hide_element = document.createElement("input");
				input_element.setAttribute("name", "keyword");
				submit_element.setAttribute("type", "submit");
				submit_element.setAttribute("value", "検索");
				hide_element.setAttribute("type", "hidden");
				hide_element.setAttribute("name", "code");
				let code = token[1].split("code=")
				hide_element.setAttribute("value", code[1].split("&state=")[0]);
				serch_form.appendChild(input_element);
				serch_form.appendChild(submit_element);
				serch_form.appendChild(hide_element);
				loginElement.appendChild(btn_element);
				loginElement.appendChild(serch_form);
			}else{
				var btn_element = document.createElement("button");
				btn_element.textContent = "ログイン"
				btn_element.setAttribute("id", "login")
				loginElement.appendChild(btn_element);
			}
		</script>
	</div>
</body>
</html>
